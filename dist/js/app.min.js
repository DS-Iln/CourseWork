(()=>{"use strict";function e(){window.location.href="registered.html"}function t(){localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1})),window.location.href="index.html"}function n(){let e=unescape(window.location.href);return e.substring(e.lastIndexOf("/")+1,e.length)}localStorage.getItem("currentUser")||localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:{completedTests:[],pointsCount:0},favorite:[],role:"User",autoAuth:!1})),"index.html"===n()&&JSON.parse(localStorage.getItem("currentUser")).email?e():"registered.html"!==n()||JSON.parse(localStorage.getItem("currentUser")).email?"registered.html"===n()&&JSON.parse(localStorage.getItem("currentUser")).email?function(){const e=document.querySelectorAll("#persaccount-button"),n=document.querySelector(".persaccLink"),s=document.querySelectorAll("#logout-button");let r=JSON.parse(localStorage.getItem("currentUser"));function o(e){e.preventDefault(),window.onbeforeunload=null,"Admin"===r.role?window.location.href="adminAccount.html":window.location.href="persAccount.html"}r.autoAuth||(window.onbeforeunload=()=>{localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1}))}),e[1].children[1].textContent=`${r.surname} ${r.name[0]}.`,e.forEach((e=>{e.addEventListener("click",o)})),n.addEventListener("click",o),s.forEach((e=>{e.addEventListener("click",t)}))}():("persAccount.html"!==n()||JSON.parse(localStorage.getItem("currentUser")).email)&&("adminAccount.html"!==n()||JSON.parse(localStorage.getItem("currentUser")).email)||(window.location.href="index.html"):window.location.href="index.html";const s=document.querySelector(".wrapper"),r=document.querySelectorAll("#auth-button"),o=document.querySelectorAll("#registr-button"),l=document.querySelector(".modal-window"),a=document.querySelector(".modal-background"),c=document.querySelector(".modal-registration"),i=document.querySelector(".modal-authorization"),d=document.querySelector("#hint-auth"),u=document.querySelector("#hint-registr"),m=document.querySelectorAll("#close-modal"),p=document.querySelectorAll(".modal__form"),g=document.querySelector("#surname-input"),h=document.querySelector("#name-input"),f=document.querySelectorAll("#email-input"),v=document.querySelectorAll("#password-input"),b=document.querySelector("#agreement"),y=document.querySelector("#entering"),L=document.querySelector(".burger-button"),S=document.querySelector("#close-menuburger"),A=document.querySelector(".menuburger-modal");if("index.html"===n()){function oe(){document.body.style.overflowY="hidden",l.classList.remove("opened"),l.classList.remove("out"),l.classList.add("opened"),E(1)}function le(){document.body.style.overflowY="hidden",l.classList.remove("opened"),l.classList.remove("out"),l.classList.add("opened"),k(0)}r[0].addEventListener("click",(()=>{w(),oe()})),r[1].addEventListener("click",(()=>{oe()})),r[2].addEventListener("click",(()=>{oe()})),o[0].addEventListener("click",(()=>{w(),le()})),o[1].addEventListener("click",(()=>{le()})),o[2].addEventListener("click",(()=>{le()})),d.addEventListener("click",(e=>{e.preventDefault(),E(1)})),u.addEventListener("click",(e=>{e.preventDefault(),k(1)})),l.addEventListener("click",(e=>{e.target.classList.contains("modal-window")&&q()})),m.forEach((e=>{e.addEventListener("click",q)})),document.addEventListener("keydown",(e=>{27===e.which&&q()}))}function w(){A.classList.add("out"),s.style.overflowY="auto"}function E(e){e?(a.classList.remove("reg"),a.classList.add("auth")):(a.classList.remove("reg"),a.classList.remove("auth")),i.classList.add("rotate"),c.classList.add("rotate"),C()}function k(e){e?(a.classList.remove("auth"),a.classList.add("reg")):(a.classList.remove("reg"),a.classList.remove("auth")),i.classList.remove("rotate"),c.classList.remove("rotate"),C()}function q(){l.classList.add("out"),i.classList.remove("rotate"),c.classList.remove("rotate"),document.body.style.overflowY="auto",C()}function C(){Array.from(document.forms).forEach((e=>{e.reset()})),g.parentElement.children[0].textContent="Фамилия",g.parentElement.classList.remove("error"),h.parentElement.children[0].textContent="Имя",h.parentElement.classList.remove("error"),f[0].parentElement.children[0].textContent="Email",f[0].parentElement.classList.remove("error"),f[1].parentElement.children[0].textContent="Email",f[1].parentElement.classList.remove("error"),v[0].parentElement.children[0].textContent="Пароль",v[0].parentElement.classList.remove("error"),v[1].parentElement.children[0].textContent="Пароль",v[1].parentElement.classList.remove("error"),b.parentElement.classList.remove("error"),y.parentElement.classList.remove("error")}function x(e){let t=e.target;if(t.classList.contains("modal__form-input")){let e=t.parentElement;e.classList.contains("error")&&(e.classList.remove("error"),"surname"===t.getAttribute("name")&&(e.children[0].textContent="Фамилия"),"name"===t.getAttribute("name")&&(e.children[0].textContent="Имя"),"email"===t.getAttribute("name")&&(e.children[0].textContent="Email"),"password"===t.getAttribute("name")&&(e.children[0].textContent="Пароль")),e.classList.add("focus"),t.onfocus=()=>{e.classList.contains("focus")||e.classList.add("focus")},t.onblur=()=>{e.classList.remove("focus")}}}function _(e,t=150){window.scrollTo({top:e.offsetTop-t,behavior:"smooth"})}if(L.addEventListener("click",(function(){s.style.overflowY="hidden",A.classList.remove("opened"),A.classList.remove("out"),A.classList.add("opened"),A.addEventListener("click",(e=>{e.target.classList.contains("menuburger-wrapper")&&w()}))})),S.addEventListener("click",w),p.forEach((e=>{e.addEventListener("click",(e=>{x(e)})),e.addEventListener("keyup",(e=>{9===e.which&&x(e)}))})),"index.html"===n()||"registered.html"===n()){const ae=document.querySelector("#about"),ce=document.querySelector("#dict"),ie=document.querySelector("#test"),de=document.querySelector("#main"),ue=document.querySelectorAll(".link:not(#random-link)");ue.forEach((e=>{"О нас"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),_(ae),w()})),"Словарь"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),_(ce,15),w()})),"Тестирование"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),_(ie),w()})),"Главная"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),_(de),w()}))})),JSON.parse(localStorage.getItem("scrollFrompage"))&&ue.forEach((e=>{e.textContent.trim()===JSON.parse(localStorage.getItem("scrollFrompage"))&&(e.click(),localStorage.setItem("scrollFrompage","[]"))}))}else if("persAccount.html"===n()||"adminAccount.html"===n()){function me(e){localStorage.setItem("scrollFrompage",JSON.stringify(e.target.textContent.trim())),window.location.href="registered.html"}document.querySelectorAll(".link").forEach((e=>{e.addEventListener("click",me)}))}const N=document.querySelector("#surname-input"),I=document.querySelector("#name-input"),O=document.querySelectorAll("#email-input"),J=document.querySelectorAll("#password-input");let T;if("index.html"===n()){function pe(e){e.classList.contains("error")&&e.classList.remove("error"),T=e.value,(!/^[А-Я]{1}/.test(T)||/^[А-Я]{1}[^а-я]/.test(T)||/^[А-Я]{1}[а-я]+[^а-я]+$/.test(T)||/\s/.test(T)||T.length>40)&&(e.value=T.substr(0,T.length-1))}N.addEventListener("input",(()=>{pe(N)})),I.addEventListener("input",(()=>{pe(I)})),O.forEach((e=>{var t;(t=e).classList.contains("error")&&t.classList.remove("error"),t.addEventListener("input",(()=>{T=t.value,(!/^[a-zA-Z0-9]{1}/.test(T)||/^[a-zA-Z0-9]{1}[^a-zA-Z0-9-@\._]/.test(T)||/^[a-zA-Z0-9]{1}[a-zA-Z0-9-@\._]+[^a-zA-Z0-9-@\._]+$/.test(T)||/[-@\._]{2}/.test(T)||/\s/.test(T)||/[@][a-z0-9-_\.]+[@]/.test(T))&&(t.value=T.substr(0,T.length-1))}))})),J.forEach((e=>{var t;(t=e).classList.contains("error")&&t.classList.remove("error"),t.addEventListener("input",(()=>{T=t.value,(!/^[a-zA-Z0-9]{1}/.test(T)||/^[a-zA-Z0-9]{1}[^a-zA-Z0-9]/.test(T)||/^[a-zA-Z0-9]{1}[a-zA-Z0-9]+[^a-zA-Z0-9]+$/.test(T)||/\s/.test(T))&&(t.value=T.substr(0,T.length-1))}))}))}if("index.html"===n()){const ge=document.querySelector("#registration-form"),he=document.querySelector("#surname-input"),fe=document.querySelector("#name-input"),ve=document.querySelectorAll("#email-input"),be=document.querySelectorAll("#password-input"),ye=document.querySelector("#agreement");if(!localStorage.getItem("accounts")){let Ae=[{surname:"Systemi",name:"Vrag",email:"AdminKrutoy@gmail.com",password:"qwertyAdmin001",points:99999999,role:"Admin",points:{completedTests:[],pointsCount:0},autoAuth:!1}];localStorage.setItem("accounts",JSON.stringify(Ae))}async function Le(e){e.preventDefault();let t=e.target,n=t.children[t.children.length-1];if(Se()){let e=JSON.parse(localStorage.getItem("accounts")),t=new FormData(ge),s={};for(let e of t.entries())s[e[0]]=e[1];s.points={completedTests:[],pointsCount:0},s.favorite=[],s.autoAuth=!1;for(let t=0;t<e.length;t++)if(e[t].email===s.email)return ve[0].parentElement.classList.add("error"),ve[0].parentElement.children[0].textContent="Данный email-адрес уже зарегистрирован",n.value="Ошибка",n.classList.add("failed"),setTimeout((()=>{n.classList.remove("failed"),n.value="Зарегистрироваться"}),2e3),void(ye.checked=!1);return e.push(s),localStorage.setItem("accounts",JSON.stringify(e)),n.value="Регистрация завершена",n.classList.add("success"),setTimeout((()=>{q(),n.classList.remove("success"),n.value="Зарегистрироваться"}),2e3),void ge.reset()}n.value="Ошибка",n.classList.add("failed"),setTimeout((()=>{n.classList.remove("failed"),n.value="Зарегистрироваться"}),2e3),ye.checked=!1}function Se(){let e=0;function t(t,n){let s=n.value.trim();if(!t.test(s)){n.value="";let t=n.parentElement;t.classList.add("error"),"surname"!==n.getAttribute("name")&&"name"!==n.getAttribute("name")||(t.children[0].textContent="Только буквы русского алфавита"),"email"===n.getAttribute("name")&&(t.children[0].textContent='Имя почтового ящика, @, доменное имя (раздел. ".")'),"password"===n.getAttribute("name")&&(t.children[0].textContent="Минимум 8 символов, 1 буква лат. алфавита и 1 цифра"),e++}return e}return t(/^[А-ЯёЁ]{1}[а-я]{1}[а-я]+$/,fe),t(/^[А-ЯёЁ]{1}[а-я]{1}[а-я]+$/,he),t(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ve[0]),t(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,be[0]),!(e>0)}ge.addEventListener("submit",Le)}if("index.html"===n()){const we=document.querySelector("#authorization-form"),Ee=document.querySelectorAll("#email-input"),ke=document.querySelectorAll("#password-input"),qe=document.querySelector("#entering");async function Ce(t){t.preventDefault();let n=t.target,s=n.children[n.children.length-1];if(xe()){let t,n=JSON.parse(localStorage.getItem("accounts")),r=new FormData(we),o={};for(let e of r.entries())o[e[0]]=e[1];let l={email:!1,password:!1};for(let e=0;e<n.length;e++)n[e].email===o.email&&n[e].password===o.password?(t=n[e],l.email=!0,l.password=!0):n[e].email===o.email?l.email=!0:n[e].password===o.password&&(l.password=!0);if(l.email&&!l.password)ke[1].parentElement.classList.add("error"),ke[1].parentElement.children[0].textContent="Неверный пароль",ke[1].value="",qe.checked=!1;else{if(l.email&&l.password)return o.checkbox?t.autoAuth=!0:t.autoAuth=!1,localStorage.setItem("currentUser",JSON.stringify(t)),s.value="Авторизация завершена",s.classList.add("success"),void setTimeout((()=>{e()}),2e3);Ee[1].parentElement.classList.add("error"),Ee[1].parentElement.children[0].textContent="Пользователь с данным email-адресом не найден",ke[1].value="",qe.checked=!1}}s.value="Ошибка",s.classList.add("failed"),setTimeout((()=>{s.classList.remove("failed"),s.value="Войти"}),2e3),qe.checked=!1}function xe(){let e=0;function t(t,n){let s=n.value.trim();if(!t.test(s)){n.value="";let t=n.parentElement;t.classList.add("error"),"email"===n.getAttribute("name")&&(t.children[0].textContent='Имя почтового ящика, @, доменное имя (раздел. ".")'),"password"===n.getAttribute("name")&&(t.children[0].textContent="Минимум 8 символов, 1 буква лат. алфавита и 1 цифра"),e++}return e}return t(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ee[1]),t(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,ke[1]),!(e>0)}we.addEventListener("submit",Ce)}var z,U,$,Z,D,M,H,j,B;for(Z=(z=document.getElementsByClassName("custom-select")).length,U=0;U<Z;U++){for(D=(M=z[U].getElementsByTagName("select")[0]).length,(H=document.createElement("DIV")).className="select-selected",H.innerHTML=M.options[M.selectedIndex].innerHTML,z[U].appendChild(H),(j=document.createElement("DIV")).className="select-items select-hide",$=1;$<D;$++)(B=document.createElement("DIV")).innerHTML=M.options[$].innerHTML,B.addEventListener("click",(function(e){var t,n,s,r,o,l,a;for(l=(r=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,o=this.parentNode.previousSibling,n=0;n<l;n++)if(r.options[n].innerHTML==this.innerHTML){for(r.selectedIndex=n,o.innerHTML=this.innerHTML,a=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,s=0;s<a;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}o.click()})),j.appendChild(B);z[U].appendChild(j),H.addEventListener("click",(function(e){e.stopPropagation(),V(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}))}function V(e){var t,n,s,r,o,l=[];for(t=document.getElementsByClassName("select-items"),n=document.getElementsByClassName("select-selected"),r=t.length,o=n.length,s=0;s<o;s++)e==n[s]?l.push(s):n[s].classList.remove("select-arrow-active");for(s=0;s<r;s++)l.indexOf(s)&&t[s].classList.add("select-hide")}function Y(e){for(;e.firstChild;)e.removeChild(e.firstChild)}if(document.addEventListener("click",(e=>{if(V(),!(e.target.classList.contains("testing-block__link")||e.target.classList.contains("testblock-bestresults")||e.target.classList.contains("results-list__item")||e.target.classList.contains("results-list")||e.target.classList.contains("testblock-bestresults__title")||e.target.classList.contains("item-points")||e.target.classList.contains("item-points__img"))){let e=document.querySelector(".testblock-bestresults");e&&e.classList.remove("opened")}})),"index.html"===n()||"registered.html"===n()){const _e=document.querySelector(".select-selected"),Ne=document.querySelector(".select-items"),Ie=document.querySelectorAll(".filters-input"),Oe=document.querySelectorAll("#search-input"),Je=document.querySelector(".filters-button"),Te=document.querySelectorAll("datalist"),ze=document.querySelector(".search-block__search-bar"),Ue=document.querySelector(".cards-items"),$e=document.querySelector("#dict"),Ze=document.querySelector("#random-link");function De(e,t){Number(e.value)>t&&(e.value=t),Number(e.value)<1&&(e.value="")}function Me(e,t){for(let n=0;n<t.length;n++){const s=document.createElement("option");s.value=t[n][0],e.append(s)}}function He(e){let t=e.length;if(t>0)if("registered.html"===n()){if(t>=200)for(let t=1;t<201;t++)ee(!0,e[t][0],e[t][1]);else for(let n=1;n<t+1;n++)ee(!0,e[n-1][0],e[n-1][1]);if(t>200){const n=function(){X(!0,e,t)};Ue.onscroll=n}}else{if(t>=200)for(let t=1;t<201;t++)ee(!1,e[t][0],e[t][1]);else for(let n=1;n<t+1;n++)ee(!1,e[n-1][0],e[n-1][1]);if(t>200){const n=function(){X(!1,e,t)};Ue.onscroll=n}}else{const e=document.createElement("p");e.className="empty-warning",e.textContent="По выбранным фильтрам совпадений не найдено",Ue.append(e)}}function je(e){e.preventDefault(),Ue.onscroll=null,Ue.scrollTop=0,"words1"===e.target.getAttribute("list")?(Y(Te[0]),document.querySelector(".header").classList.contains("reduced")?(document.querySelector(".header").classList.toggle("default"),document.querySelector(".header").classList.toggle("reduced"),setTimeout((()=>{Ve(e)}),600)):Ve(e)):Ve(e)}function Be(){_e.textContent="Выбрать";for(let e=0;e<Ne.children.length;e++)Ne.children[e].hasAttribute("class")&&Ne.children[e].removeAttribute("class");Ie[0].value="",Ie[1].value="",Oe[0].value="",Oe[1].value=""}function Ve(e){te("../dist/files/dictionary_compact.json").then((t=>{Y(Ue);const s=Object.entries(t),r=s.length;let o=s,l=_e.textContent.trim().toLowerCase();if(!("выбрать"!==l||Ie[0].value||Ie[1].value||Oe[0].value||Oe[1].value)){if(Y(Ue),"registered.html"===n()){for(let e=1;e<201;e++)ee(!0,s[e][0],s[e][1]);const e=function(){X(!0,s,r)};return Ue.onscroll=e,void Be()}{for(let e=1;e<201;e++)ee(!1,s[e][0],s[e][1]);const e=function(){X(!1,s,r)};return Ue.onscroll=e,void Be()}}"words1"===e.target.getAttribute("list")&&_($e,15),"выбрать"!==l&&(o=o.filter((e=>e[0][0]===l)));let a,c=Ie[0].value,i=Ie[1].value;if((c||i)&&(!c&&i&&(o=o.filter((e=>e[0].length<=+i))),c&&!i&&(o=o.filter((e=>e[0].length>=+c))),c&&i&&(o=+c==+i?o.filter((e=>e[0].length===+c)):o.filter((e=>e[0].length>=+c&&e[0].length<=+i)))),Oe[0].value&&(a=Oe[0].value),Oe[1].value&&(a=Oe[1].value),a){o=[];for(let e=s.length-1;e>=0;e--)(s[e][0]===a||s[e][0].includes(a))&&o.push(s[e])}He(o),Be()}))}function Ye(e){13===e.which&&je(e)}ze.addEventListener("click",(function(e){(e.target.classList.contains("search-block__search-bar")||e.target.classList.contains("search-block__search-input")||e.target.classList.contains("search-keyhint"))&&(document.querySelector(".header").classList.contains("default")&&document.querySelector(".header").classList.toggle("default"),document.querySelector(".header").classList.contains("reduced")||(document.querySelector(".header").classList.toggle("reduced"),setTimeout((()=>{Oe[0].focus()}),600)))})),Oe[0].addEventListener("blur",(()=>{document.querySelector(".header").classList.contains("reduced")&&(document.querySelector(".header").classList.toggle("default"),document.querySelector(".header").classList.toggle("reduced"))})),Oe[1].addEventListener("blur",(()=>{Y(Te[1])})),document.body.addEventListener("scroll",(function(){let e=document.querySelectorAll("input[list]");for(let t=0;t<e.length;t++)e[t].blur()})),Ie.forEach((e=>{e.addEventListener("input",(()=>{De(e,+Ie[1].placeholder.slice(-2))}))})),te("../dist/files/dictionary_compact.json").then((e=>{const t=Object.entries(e);Oe.forEach((e=>{e.addEventListener("input",(n=>{let s=e===Oe[0]?Te[0]:Te[1],r=n.target.value;if(Y(s),/^[^a-z]/.test(r)&&(r=r.substr(0,r.length-1)),/[^a-z-\s]/.test(r)&&(r=r.substr(0,r.length-1)),/\s\s/.test(r)&&(r=r.substr(0,r.length-1)),n.target.value=r,1===r.length){let e=[];for(let n=t.length-1;n>=0;n--)t[n][0].slice(0,1)===r&&t[n][0]!==r&&e.push(t[n]);Me(s,e)}if(2===r.length){let e=[];for(let n=t.length-1;n>=0;n--)t[n][0].slice(0,2)===r&&t[n][0]!==r&&e.push(t[n]);Me(s,e)}if(r.length>2){let e=[];for(let n=t.length-1;n>=0;n--)t[n][0].includes(r)&&t[n][0]!==r&&e.push(t[n]);Me(s,e)}}))})),Ze.addEventListener("click",(e=>{e.preventDefault();let n=(s=1,r=t.length,s=Math.ceil(s),r=Math.floor(r),Math.floor(Math.random()*(r-s+1))+s);var s,r;Oe[0].value=t[n][0],Oe[0].focus()}))})),Oe[0].onkeydown=Oe[0].onkeypress=Ye,Je.addEventListener("click",je)}const F="http://www.w3.org/2000/svg",P=document.querySelector(".cards-items"),R=document.querySelectorAll(".filters-input")[1];let W=201,G=W+200+1;const K=function(){const e=document.createElementNS(F,"svg");e.setAttribute("class","card-item__save-icon"),e.setAttributeNS(null,"width","33"),e.setAttributeNS(null,"height","39"),e.setAttributeNS(null,"viewBox","0 0 33 39"),e.setAttributeNS(null,"fill","none");const t=document.createElementNS(F,"path");return t.setAttributeNS(null,"d","M32 6V4C32 2.34315 30.6569 1 29 1V1M29 1C28.3201 1 26.6305 1 26 1L21 1C15.7814 1 9.99672 1 5.99671 1C3.23528 1 1 3.23858 1 6V36.9733C1 37.8022 1.95059 38.2712 2.60843 37.7669L12.3916 30.2665C12.7505 29.9913 13.2495 29.9913 13.6084 30.2665L23.4202 37.7888C24.0728 38.2891 25.0165 37.8417 25.0282 37.0195C25.1184 30.6753 25.3937 11.1724 25.3937 9.5C25.3937 7.5 25 3.5 29 1Z"),t.setAttributeNS(null,"stroke","#4E3636"),e.append(t),e}(),Q=function(){const e=document.createElement("button");e.className="card-item__button",e.classList.add("button"),e.setAttribute("id","more-button");const t=document.createElement("span");t.className="button-span",t.textContent="Показать больше";const n=document.createElementNS(F,"svg");n.setAttribute("class","button-icon"),n.setAttributeNS(null,"fill","none");const s=document.createElementNS(F,"path");return s.setAttributeNS(null,"d","M1.87272 5.93481L5.65489 2.05828L9.4312 5.92971L10.4346 4.90114L5.65489 0.000121117L0.86935 4.90624L1.87272 5.93481Z"),s.setAttributeNS(null,"fill","#4E3636"),n.append(s),e.append(t),e.append(n),e}();function X(e,t,n){if(P.offsetHeight+P.scrollTop>=P.scrollHeight){if(e)for(let e=W;e<G;e++)ee(!0,t[e][0],t[e][1]);else for(let e=W;e<G;e++)ee(!1,t[e][0],t[e][1]);G===n&&(P.onscroll=null),W=G,G=G+200+1>n?n:G+200+1}}function ee(e,t,n){let s=document.createElement("div");s.className="cards-items__card-item",s.classList.add("card-item");let r=JSON.parse(localStorage.getItem("currentUser")).favorite;if(e&&r){s.classList.add("reged");let e=K.cloneNode(!0);s.append(e)}let o=document.createElement("h3");if(o.className="card-item__title",o.textContent=`${t}`,o.setAttribute("title",`${t}`),r)for(let e=0;e<r.length;e++)r[e][0]===o.textContent&&s.children[0].classList.add("active");let l=document.createElement("img");l.className="card-item__separator",l.setAttribute("src","img/Rectangle31.svg"),l.setAttribute("alt","Separator");let a=document.createElement("p");a.className="card-item__definition",a.textContent=`${n}`,s.append(o),s.append(l),s.append(a),P.append(s);let c=P.lastChild,i=c.children;if(i[i.length-1].textContent.length>299){let e=Q.cloneNode(!0);c.append(e),c.lastChild.addEventListener("click",(()=>{c.classList.toggle("deployed"),c.lastChild.children[0].textContent=c.classList.contains("deployed")?"Свернуть":"Показать больше"}))}}async function te(e){const t=await fetch(e);return await t.json()}if("index.html"!==n()&&"registered.html"!==n()||window.addEventListener("DOMContentLoaded",(()=>{te("../dist/files/dictionary_compact.json").then((e=>{const t=Object.entries(e),s=t.length;let r=t[0][0].length;if(t.forEach((e=>{e[0].length>r&&(r=e[0].length)})),R.placeholder=`до ${r}`,Y(P),"registered.html"===n()){for(let e=1;e<201;e++)ee(!0,t[e][0],t[e][1]);const e=function(){X(!0,t,s)};P.onscroll=e}else{for(let e=1;e<201;e++)ee(!1,t[e][0],t[e][1]);const e=function(){X(!1,t,s)};P.onscroll=e}}))})),"registered.html"===n()){const Fe=document.querySelector("#continue-testing"),Pe=document.querySelector("#skip-task"),Re=document.querySelector(".special-word"),We=document.querySelector(".answers-block"),Ge=document.querySelector(".testblock-banner"),Ke=document.querySelector(".testing-block__task-title"),Qe=document.querySelector("#best-results"),Xe=document.querySelector(".testblock-bestresults"),et=document.querySelector(".results-list");Ge.classList.toggle("_hidden");const tt=[{testType:"radio",word:"Catamaran",answer:"Any vessel with twin hulls, whether propelled by sails or by steam; esp., one of a class of double-hulled pleasure boats remarkable for speed.",incorrectAnswers:["The caravel of the 16th century was a small vessel with broad bows, high, narrow poop, four masts, and lateen sails.","A war vessel, ranking next below a frigate, and having usually only one tier of guns; -- called in the United States navy a sloop of war.","A light and elegantly furnished vessel, used either for private parties of pleasure, or as a vessel of state to convey distinguished persons from one place to another; a seagoing vessel used only for pleasure trips, racing, etc."]},{testType:"radio",word:"Acceptance",answer:'The act of accepting; a receiving what is offered, with approbation, satisfaction, or acquiescence; esp., favorable reception; approval; as, the acceptance of a gift, office, doctrine, etc. They shall come up with acceptance on mine altar. Isa. lx. 7. 2. State of being accepted; acceptableness. "Makes it assured of acceptance." Shak.',incorrectAnswers:["An act or instance of working or acting together for a common purpose or benefit; joint action.","The identification of something as having been previously seen, heard, known, etc.","The act of allowing to enter; entrance granted by permission, by provision or existence of pecuniary means, or by the removal of obstacles."]},{testType:"checkbox",word:"Elegant",answer:["Very choice, and hence, pleasing to good taste; characterized by grace, propriety, and refinement, and the absence of every thing offensive; exciting admiration and approbation by symmetry, completeness, freedom from blemish, and the like; graceful; tasteful and highly attractive.","Exercising a nice choice; discriminating beauty or sensitive to beauty."],incorrectAnswers:["Having an attractive, well-proportioned, and imposing appearance suggestive of health and strength.","Characterized by elegance or beauty of form, manner, movement, or speech."]}];let nt;function st(e,t){let n,s;Ke.textContent=`Задание №${t+1}`,Re.textContent=e[t].word,Y(We),"radio"===e[t].testType?(n="radio",s=[{num:1,body:e[t].answer},{num:2,body:e[t].incorrectAnswers[0]},{num:3,body:e[t].incorrectAnswers[1]},{num:4,body:e[t].incorrectAnswers[2]}]):(n="checkbox",s=[{num:1,body:e[t].answer[0]},{num:2,body:e[t].answer[1]},{num:3,body:e[t].incorrectAnswers[0]},{num:4,body:e[t].incorrectAnswers[1]}],nt=[]);for(let e=0;e<4;e++){const t=document.createElement("input");t.setAttribute("id",`${e+1}`),"radio"===n?(t.setAttribute("type","radio"),t.setAttribute("name","radio-answer"),t.classList.add("answers-block__answer-radio")):(t.setAttribute("type","checkbox"),t.classList.add("answers-block__answer-checkbox"));const r=document.createElement("label");r.setAttribute("for",`${e+1}`),r.classList.add("answers-block__answer-label");const o=document.createElement("span");let l=s.length*Math.random()|0;"radio"===n&&1===s[l].num?nt=e+1:("checkbox"===n&&1===s[l].num||"checkbox"===n&&2===s[l].num)&&nt.push(e+1),o.textContent=s[l].body,s.splice(l,1),We.append(t),We.append(r),r.append(o)}}function rt(e,t){Pe.disabled=!1,Fe.disabled=!0,st(e,t)}localStorage.getItem("tests")||localStorage.setItem("tests",JSON.stringify(tt));const ot=JSON.parse(localStorage.getItem("tests")),lt=ot.length;let at=0;function ct(){if(at++,at===lt){const e=document.querySelector(".tests");Y(e),Ke.textContent="Задание №0";const t=document.createElement("h3");return t.className="warning-block__title",t.textContent="Вы завершили прохождение всех тестовых заданий",void e.append(t)}return rt(ot,at),at}function it(){let e=document.querySelectorAll(".incorrect"),t=JSON.parse(localStorage.getItem("accounts")),n=JSON.parse(localStorage.getItem("currentUser")),s=+Ke.textContent.slice(-1);0===e.length&&(n.points.completedTests.includes(s)||(n.points.completedTests.push(s),n.points.pointsCount++)),localStorage.setItem("currentUser",JSON.stringify(n));for(let e=0;e<t.length;e++)t[e].email===n.email&&(t[e]=n);localStorage.setItem("accounts",JSON.stringify(t))}function dt(){const e=JSON.parse(localStorage.getItem("accounts"));let t=[];e.forEach((e=>{t.push({name:e.name,surname:e.surname,points:e.points.pointsCount})})),t=t.sort(((e,t)=>t.points-e.points)),Y(et);for(let e=0;e<t.length;e++){if(e>9)return;const n=document.createElement("li");n.className="results-list__item",n.textContent=`${t[e].surname} ${t[e].name}`;const s=document.createElement("span");s.className="results-list__item-points",s.classList.add("item-points");const r=document.createElement("img");r.className="item-points__img",r.setAttribute("alt","#"),r.src="img/star.svg",s.textContent=t[e].points,s.append(r),n.append(s),et.append(n)}}st(ot,at),We.addEventListener("click",(e=>{let t=e.target;t.classList.contains("answers-block__answer-radio")?(+t.getAttribute("id")===nt?t.classList.add("correct"):t.classList.add("incorrect"),document.querySelectorAll(".answers-block__answer-radio").forEach((e=>{e.classList.contains("correct")||(e.disabled=!0),+e.getAttribute("id")!==nt||e.classList.contains("correct")||e.classList.add("discorrect")})),Pe.disabled||(Pe.disabled=!0),Fe.disabled&&(Fe.disabled=!1),"null"!==Fe.onclick&&(Fe.onclick=null,Fe.onclick=()=>{it(),ct()})):(Pe.disabled||(Pe.disabled=!0),Fe.disabled&&(Fe.disabled=!1),document.querySelectorAll(".answers-block__answer-checkbox:checked").length||(Pe.disabled=!1,Fe.disabled=!0),"null"!==Fe.onclick&&(Fe.onclick=()=>{document.querySelectorAll(".answers-block__answer-checkbox").forEach((e=>{e.checked&&(+e.getAttribute("id")===nt[0]||+e.getAttribute("id")===nt[1]?e.classList.add("correct"):e.classList.add("incorrect")),(+e.getAttribute("id")===nt[0]&&!e.classList.contains("correct")||+e.getAttribute("id")===nt[1]&&!e.classList.contains("correct"))&&e.classList.add("discorrect"),e.disabled=!0})),it(),setTimeout(ct,2500),Fe.blur()}))})),Pe.addEventListener("click",ct),Qe.addEventListener("click",(e=>{e.preventDefault(),Xe.classList.toggle("opened"),dt()}))}function ne(){const e=document.querySelectorAll("#logout-button"),t=document.querySelector(".user-names__user"),n=document.querySelector(".user-email__email"),s=document.querySelector(".points-block__points");let r=JSON.parse(localStorage.getItem("currentUser"));return r.autoAuth||(window.onbeforeunload=()=>{localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1}))}),e.forEach((e=>{e.addEventListener("click",se)})),[t,n,s,r]}function se(){localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1})),window.location.href="index.html"}Object.defineProperty(String.prototype,"capitalize",{value:function(){return this.charAt(0).toUpperCase()+this.slice(1)},enumerable:!1}),"persAccount.html"===n()?function(){const[e,t,n,s]=ne();e.textContent=`${s.surname} ${s.name}`,t.textContent=s.email,n.textContent=s.points.pointsCount}():"adminAccount.html"===n()&&function(){const[e,t,n,s]=ne();e.textContent=`${s.surname} ${s.name}`,t.textContent=s.email,n.textContent=s.points.pointsCount;const r=document.querySelector(".tests-adding"),o=document.querySelector("#select-test-type"),l=document.querySelector("#type-radio"),a=document.querySelectorAll("#type-radio > input"),c=document.querySelector("#type-checkbox"),i=document.querySelectorAll("#type-checkbox > input"),d=document.querySelector(".tests-removing__input"),u=document.querySelector(".tests-removing__button");o.addEventListener("change",(()=>{if(l.classList.toggle("_hidden"),c.classList.toggle("_hidden"),"checkbox"===o.children[o.selectedIndex].value){console.log("radio closed");for(let e=0;e<a.length;e++)a[e].disabled=!0;for(let e=0;e<i.length;e++)i[e].disabled=!1,console.log(i[e])}else{console.log("checkbox closed");for(let e=0;e<a.length;e++)a[e].disabled=!1;for(let e=0;e<i.length;e++)i[e].disabled=!0}})),r.addEventListener("input",(e=>{let t=e.target;if(t.classList.contains("configuration-settings__input")){let e=t.value;(/[^a-zA-Z0-9-,;\.-\s]/.test(e)||/\s{2}/.test(e))&&(e=e.substr(0,e.length-1)),t.value=e}})),r.addEventListener("submit",(e=>{e.preventDefault();const t=e.target,n=new FormData(t);let s;s=c.classList.contains("_hidden")?{incorrectAnswers:[]}:{answer:[],incorrectAnswers:[]};for(let e of n.entries()){if(console.log(e[0],":",e[1]),!e[1])return void alert("Полностью заполните форму");c.classList.contains("_hidden")?"incorrectAnswers"===e[0]?s.incorrectAnswers.push(e[1]):"word"===e[0]?s[e[0]]=e[1].capitalize():s[e[0]]=e[1]:"incorrectAnswers"===e[0]?s.incorrectAnswers.push(e[1]):"answer"===e[0]?s.answer.push(e[1]):"word"===e[0]&&(s[e[0]]=e[1].capitalize())}alert("Новое задание успешно добавлено"),t.reset();const r=JSON.parse(localStorage.getItem("tests"));r.push(s),localStorage.setItem("tests",JSON.stringify(r))})),u.addEventListener("click",(()=>{const e=JSON.parse(localStorage.getItem("tests"));0==+d.value?alert("Введите идентификатор удаляемого задания"):e[+d.value-1]?e.splice(+d.value-1,1):alert(`Задания с индентификатором ${+d.value-1} не существует`),d.value="",localStorage.setItem("tests",JSON.stringify(e))})),d.addEventListener("input",(()=>{let e=d.value;(/[^0-9]/.test(e)||/^[0]/.test(e)||/.{3}/.test(e))&&(e=e.substr(0,e.length-1)),d.value=e}))}();const re=document.querySelector(".cards-items");if("registered.html"===n()||"persAccount.html"===n()){function ut(e){let t=e.children,n=JSON.parse(localStorage.getItem("currentUser")),s=n.favorite;if(t[0].classList.contains("active"))for(let e=0;e<s.length;e++)s[e][0]===t[1].textContent&&s.splice(e,1);else t.length>4?s.push([t[1].textContent,t[t.length-2].textContent]):s.push([t[1].textContent,t[t.length-1].textContent]);let r=JSON.parse(localStorage.getItem("accounts"));for(let e=0;e<r.length;e++)r[e].email===n.email&&(r[e]=n);localStorage.setItem("accounts",JSON.stringify(r)),localStorage.setItem("currentUser",JSON.stringify(n)),t[0].classList.toggle("active")}re.addEventListener("click",(e=>{let t=e.target;t.parentElement.classList.contains("card-item__save-icon")&&ut(t.parentElement.parentElement),t.classList.contains("card-item__save-icon")&&ut(t.parentElement)}))}if("persAccount.html"===n()){const mt=JSON.parse(localStorage.getItem("currentUser")).favorite;Y(re);for(let pt=0;pt<mt.length;pt++)ee(!0,mt[pt][0],mt[pt][1])}if(function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),"persAccount.html"===n()||"adminAccount.html"===n())document.body.style.overflowY="auto";else{const gt=document.querySelector(".loader-wrapper");setTimeout((()=>{gt.classList.toggle("closed"),document.body.style.overflowY="auto",setTimeout((()=>{gt.classList.toggle("_hidden")}),650)}),2e3)}})();