(()=>{"use strict";function e(){window.location.href="registered.html"}function t(){localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1})),window.location.href="index.html"}function n(){const e=document.querySelectorAll("#logout-button"),t=document.querySelector(".user-names__user"),n=document.querySelector(".user-email__email"),r=document.querySelector(".points-block__points");let o=JSON.parse(localStorage.getItem("currentUser"));return o.autoAuth||(window.onbeforeunload=()=>{localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1}))}),e.forEach((e=>{e.addEventListener("click",s)})),[t,n,r,o]}function s(){localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1})),window.location.href="index.html"}function r(){let e=unescape(window.location.href);return e.substring(e.lastIndexOf("/")+1,e.length)}Object.defineProperty(String.prototype,"capitalize",{value:function(){return this.charAt(0).toUpperCase()+this.slice(1)},enumerable:!1}),"persAccount.html"===r()?function(){const[e,t,s,r]=n();e.textContent=`${r.surname} ${r.name}`,t.textContent=r.email,s.textContent=r.points.pointsCount}():"adminAccount.html"===r()&&function(){const[e,t,s,r]=n();e.textContent=`${r.surname} ${r.name}`,t.textContent=r.email,s.textContent=r.points.pointsCount;const o=document.querySelector(".tests-adding"),l=document.querySelector("#select-test-type"),a=document.querySelector("#type-radio"),c=document.querySelectorAll("#type-radio > input"),i=document.querySelector("#type-checkbox"),d=document.querySelectorAll("#type-checkbox > input"),u=document.querySelector(".tests-removing__input"),m=document.querySelector(".tests-removing__button");l.addEventListener("change",(()=>{if(a.classList.toggle("_hidden"),i.classList.toggle("_hidden"),"checkbox"===l.children[l.selectedIndex].value){console.log("radio closed");for(let e=0;e<c.length;e++)c[e].disabled=!0;for(let e=0;e<d.length;e++)d[e].disabled=!1,console.log(d[e])}else{console.log("checkbox closed");for(let e=0;e<c.length;e++)c[e].disabled=!1;for(let e=0;e<d.length;e++)d[e].disabled=!0}})),o.addEventListener("click",(e=>{e.target})),o.addEventListener("submit",(e=>{e.preventDefault();const t=e.target,n=new FormData(t);let s;s=i.classList.contains("_hidden")?{incorrectAnswers:[]}:{answer:[],incorrectAnswers:[]};for(let e of n.entries()){if(console.log(e[0],":",e[1]),!e[1])return void alert("Полностью заполните форму");i.classList.contains("_hidden")?"incorrectAnswers"===e[0]?s.incorrectAnswers.push(e[1]):"word"===e[0]?s[e[0]]=e[1].capitalize():s[e[0]]=e[1]:"incorrectAnswers"===e[0]?s.incorrectAnswers.push(e[1]):"answer"===e[0]?s.answer.push(e[1]):"word"===e[0]&&(s[e[0]]=e[1].capitalize())}alert("Новое задание успешно добавлено"),t.reset();const r=JSON.parse(localStorage.getItem("tests"));r.push(s),localStorage.setItem("tests",JSON.stringify(r))})),m.addEventListener("click",(()=>{const e=JSON.parse(localStorage.getItem("tests"));e.splice(+u.value-1,1),localStorage.setItem("tests",JSON.stringify(e))})),u.addEventListener("input",(()=>{}))}();localStorage.getItem("currentUser")||localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:{completedTests:[],pointsCount:0},favorite:[],role:"User",autoAuth:!1})),"index.html"===r()&&JSON.parse(localStorage.getItem("currentUser")).email?e():"registered.html"!==r()||JSON.parse(localStorage.getItem("currentUser")).email?"registered.html"===r()&&JSON.parse(localStorage.getItem("currentUser")).email?function(){const e=document.querySelectorAll("#persaccount-button"),n=document.querySelector(".persaccLink"),s=document.querySelectorAll("#logout-button");let r=JSON.parse(localStorage.getItem("currentUser"));function o(e){e.preventDefault(),window.onbeforeunload=null,"Admin"===r.role?window.location.href="adminAccount.html":window.location.href="persAccount.html"}r.autoAuth||(window.onbeforeunload=()=>{localStorage.setItem("currentUser",JSON.stringify({surname:"",name:"",email:"",password:"",points:0,favorite:[],role:"User",autoAuth:!1}))}),e[1].children[1].textContent=`${r.surname} ${r.name[0]}.`,e.forEach((e=>{e.addEventListener("click",o)})),n.addEventListener("click",o),s.forEach((e=>{e.addEventListener("click",t)}))}():("persAccount.html"!==r()||JSON.parse(localStorage.getItem("currentUser")).email)&&("adminAccount.html"!==r()||JSON.parse(localStorage.getItem("currentUser")).email)||(window.location.href="index.html"):window.location.href="index.html";const o=document.querySelector(".wrapper"),l=document.querySelectorAll("#auth-button"),a=document.querySelectorAll("#registr-button"),c=document.querySelector(".modal-window"),i=document.querySelector(".modal-background"),d=document.querySelector(".modal-registration"),u=document.querySelector(".modal-authorization"),m=document.querySelector("#hint-auth"),p=document.querySelector("#hint-registr"),h=document.querySelectorAll("#close-modal"),g=document.querySelectorAll(".modal__form"),f=document.querySelector("#surname-input"),v=document.querySelector("#name-input"),b=document.querySelectorAll("#email-input"),S=document.querySelectorAll("#password-input"),L=document.querySelector("#agreement"),y=document.querySelector("#entering"),A=document.querySelector(".burger-button"),w=document.querySelector("#close-menuburger"),E=document.querySelector(".menuburger-modal");if("index.html"===r()){function oe(){o.style.overflowY="hidden",c.classList.remove("opened"),c.classList.remove("out"),c.classList.add("opened"),q(1)}function le(){o.style.overflowY="hidden",c.classList.remove("opened"),c.classList.remove("out"),c.classList.add("opened"),C(0)}l[0].addEventListener("click",(()=>{k(),oe()})),l[1].addEventListener("click",(()=>{oe()})),l[2].addEventListener("click",(()=>{oe()})),a[0].addEventListener("click",(()=>{k(),le()})),a[1].addEventListener("click",(()=>{le()})),a[2].addEventListener("click",(()=>{le()})),m.addEventListener("click",(e=>{e.preventDefault(),q(1)})),p.addEventListener("click",(e=>{e.preventDefault(),C(1)})),c.addEventListener("click",(e=>{e.target.classList.contains("modal-window")&&x()})),h.forEach((e=>{e.addEventListener("click",x)})),document.addEventListener("keydown",(e=>{27===e.which&&x()}))}function k(){E.classList.add("out"),o.style.overflowY="auto"}function q(e){e?(i.classList.remove("reg"),i.classList.add("auth")):(i.classList.remove("reg"),i.classList.remove("auth")),u.classList.add("rotate"),d.classList.add("rotate"),_()}function C(e){e?(i.classList.remove("auth"),i.classList.add("reg")):(i.classList.remove("reg"),i.classList.remove("auth")),u.classList.remove("rotate"),d.classList.remove("rotate"),_()}function x(){c.classList.add("out"),u.classList.remove("rotate"),d.classList.remove("rotate"),o.style.overflowY="auto",_()}function _(){Array.from(document.forms).forEach((e=>{e.reset()})),f.parentElement.children[0].textContent="Фамилия",f.parentElement.classList.remove("error"),v.parentElement.children[0].textContent="Имя",v.parentElement.classList.remove("error"),b[0].parentElement.children[0].textContent="Email",b[0].parentElement.classList.remove("error"),b[1].parentElement.children[0].textContent="Email",b[1].parentElement.classList.remove("error"),S[0].parentElement.children[0].textContent="Пароль",S[0].parentElement.classList.remove("error"),S[1].parentElement.children[0].textContent="Пароль",S[1].parentElement.classList.remove("error"),L.parentElement.classList.remove("error"),y.parentElement.classList.remove("error")}function N(e){let t=e.target;if(t.classList.contains("modal__form-input")){let e=t.parentElement;e.classList.contains("error")&&(e.classList.remove("error"),"surname"===t.getAttribute("name")&&(e.children[0].textContent="Фамилия"),"name"===t.getAttribute("name")&&(e.children[0].textContent="Имя"),"email"===t.getAttribute("name")&&(e.children[0].textContent="Email"),"password"===t.getAttribute("name")&&(e.children[0].textContent="Пароль")),e.classList.add("focus"),t.onfocus=()=>{e.classList.contains("focus")||e.classList.add("focus")},t.onblur=()=>{e.classList.remove("focus")}}}function I(e,t=150){window.scrollTo({top:e.offsetTop-t,behavior:"smooth"})}if(A.addEventListener("click",(function(){o.style.overflowY="hidden",E.classList.remove("opened"),E.classList.remove("out"),E.classList.add("opened"),E.addEventListener("click",(e=>{e.target.classList.contains("menuburger-wrapper")&&k()}))})),w.addEventListener("click",k),g.forEach((e=>{e.addEventListener("click",(e=>{N(e)})),e.addEventListener("keyup",(e=>{9===e.which&&N(e)}))})),"index.html"===r()||"registered.html"===r()){const ae=document.querySelector("#about"),ce=document.querySelector("#dict"),ie=document.querySelector("#test"),de=document.querySelector("#main"),ue=document.querySelectorAll(".link:not(#random-link)");ue.forEach((e=>{"О нас"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),I(ae),k()})),"Словарь"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),I(ce,15),k()})),"Тестирование"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),I(ie),k()})),"Главная"===e.textContent.trim()&&e.addEventListener("click",(e=>{e.preventDefault(),I(de),k()}))})),JSON.parse(localStorage.getItem("scrollFrompage"))&&ue.forEach((e=>{e.textContent.trim()===JSON.parse(localStorage.getItem("scrollFrompage"))&&(e.click(),localStorage.setItem("scrollFrompage","[]"))}))}else if("persAccount.html"===r()||"adminAccount.html"===r()){function me(e){localStorage.setItem("scrollFrompage",JSON.stringify(e.target.textContent.trim())),window.location.href="registered.html"}document.querySelectorAll(".link").forEach((e=>{e.addEventListener("click",me)}))}const O=document.querySelector("#surname-input"),J=document.querySelector("#name-input"),T=document.querySelectorAll("#email-input"),z=document.querySelectorAll("#password-input");let U;if("index.html"===r()){function pe(e){e.classList.contains("error")&&e.classList.remove("error"),U=e.value,(!/^[А-Я]{1}/.test(U)||/^[А-Я]{1}[^а-я]/.test(U)||/^[А-Я]{1}[а-я]+[^а-я]+$/.test(U)||/\s/.test(U)||U.length>40)&&(e.value=U.substr(0,U.length-1))}O.addEventListener("input",(()=>{pe(O)})),J.addEventListener("input",(()=>{pe(J)})),T.forEach((e=>{var t;(t=e).classList.contains("error")&&t.classList.remove("error"),t.addEventListener("input",(()=>{U=t.value,(!/^[a-zA-Z0-9]{1}/.test(U)||/^[a-zA-Z0-9]{1}[^a-zA-Z0-9-@\._]/.test(U)||/^[a-zA-Z0-9]{1}[a-zA-Z0-9-@\._]+[^a-zA-Z0-9-@\._]+$/.test(U)||/[-@\._]{2}/.test(U)||/\s/.test(U)||/[@][a-z0-9-_\.]+[@]/.test(U))&&(t.value=U.substr(0,U.length-1))}))})),z.forEach((e=>{var t;(t=e).classList.contains("error")&&t.classList.remove("error"),t.addEventListener("input",(()=>{U=t.value,(!/^[a-zA-Z0-9]{1}/.test(U)||/^[a-zA-Z0-9]{1}[^a-zA-Z0-9]/.test(U)||/^[a-zA-Z0-9]{1}[a-zA-Z0-9]+[^a-zA-Z0-9]+$/.test(U)||/\s/.test(U))&&(t.value=U.substr(0,U.length-1))}))}))}if("index.html"===r()){const he=document.querySelector("#registration-form"),ge=document.querySelector("#surname-input"),fe=document.querySelector("#name-input"),ve=document.querySelectorAll("#email-input"),be=document.querySelectorAll("#password-input"),Se=document.querySelector("#agreement");if(!localStorage.getItem("accounts")){let Ae=[{surname:"Systemi",name:"Vrag",email:"AdminKrutoy@gmail.com",password:"qwertyAdmin001",points:99999999,role:"Admin",points:{completedTests:[],pointsCount:0},autoAuth:!1}];localStorage.setItem("accounts",JSON.stringify(Ae))}async function Le(e){e.preventDefault();let t=e.target,n=t.children[t.children.length-1];if(ye()){let e=JSON.parse(localStorage.getItem("accounts")),t=new FormData(he),s={};for(let e of t.entries())s[e[0]]=e[1];s.points={completedTests:[],pointsCount:0},s.favorite=[],s.autoAuth=!1;for(let t=0;t<e.length;t++)if(e[t].email===s.email)return ve[0].parentElement.classList.add("error"),ve[0].parentElement.children[0].textContent="Данный email-адрес уже зарегистрирован",ge.value="",fe.value="",be[0].value="",void(Se.checked=!1);return e.push(s),localStorage.setItem("accounts",JSON.stringify(e)),n.value="Регистрация завершена",n.classList.add("success"),setTimeout((()=>{x(),n.classList.remove("success"),n.value="Зарегистрироваться"}),2e3),void he.reset()}n.value="Ошибка",n.classList.add("failed"),setTimeout((()=>{n.classList.remove("failed"),n.value="Зарегистрироваться"}),2e3),Se.checked=!1}function ye(){let e=0;function t(t,n){let s=n.value.trim();if(!t.test(s)){n.value="";let t=n.parentElement;t.classList.add("error"),"surname"!==n.getAttribute("name")&&"name"!==n.getAttribute("name")||(t.children[0].textContent="Только буквы русского алфавита"),"email"===n.getAttribute("name")&&(t.children[0].textContent='Имя почтового ящика, @, доменное имя (раздел. ".")'),"password"===n.getAttribute("name")&&(t.children[0].textContent="Минимум 8 символов, 1 буква лат. алфавита и 1 цифра"),e++}return e}return t(/^[А-ЯёЁ]{1}[а-я]{1}[а-я]+$/,fe),t(/^[А-ЯёЁ]{1}[а-я]{1}[а-я]+$/,ge),t(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ve[0]),t(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,be[0]),!(e>0)}he.addEventListener("submit",Le)}if("index.html"===r()){const we=document.querySelector("#authorization-form"),Ee=document.querySelectorAll("#email-input"),ke=document.querySelectorAll("#password-input"),qe=document.querySelector("#entering");async function Ce(t){t.preventDefault();let n=t.target,s=n.children[n.children.length-1];if(xe()){let t,n=JSON.parse(localStorage.getItem("accounts")),r=new FormData(we),o={};for(let e of r.entries())o[e[0]]=e[1];let l={email:!1,password:!1};for(let e=0;e<n.length;e++)n[e].email===o.email&&n[e].password===o.password?(t=n[e],l.email=!0,l.password=!0):n[e].email===o.email?l.email=!0:n[e].password===o.password&&(l.password=!0);return l.email&&!l.password?(ke[1].parentElement.classList.add("error"),ke[1].parentElement.children[0].textContent="Неверный пароль",ke[1].value="",void(qe.checked=!1)):l.email&&l.password?(o.checkbox?t.autoAuth=!0:t.autoAuth=!1,localStorage.setItem("currentUser",JSON.stringify(t)),s.value="Авторизация завершена",s.classList.add("success"),setTimeout((()=>{e(),x(),s.classList.remove("success"),s.value="Войти"}),2e3),void we.reset()):(Ee[1].parentElement.classList.add("error"),Ee[1].parentElement.children[0].textContent="Пользователь с данным email-адресом не найден",ke[1].value="",void(qe.checked=!1))}s.value="Ошибка",s.classList.add("failed"),setTimeout((()=>{s.classList.remove("failed"),s.value="Войти"}),2e3),qe.checked=!1}function xe(){let e=0;function t(t,n){let s=n.value.trim();if(!t.test(s)){n.value="";let t=n.parentElement;t.classList.add("error"),"email"===n.getAttribute("name")&&(t.children[0].textContent='Имя почтового ящика, @, доменное имя (раздел. ".")'),"password"===n.getAttribute("name")&&(t.children[0].textContent="Минимум 8 символов, 1 буква лат. алфавита и 1 цифра"),e++}return e}return t(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ee[1]),t(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,ke[1]),!(e>0)}we.addEventListener("submit",Ce)}var $,Z,D,M,H,j,B,V,F;for(M=($=document.getElementsByClassName("custom-select")).length,Z=0;Z<M;Z++){for(H=(j=$[Z].getElementsByTagName("select")[0]).length,(B=document.createElement("DIV")).className="select-selected",B.innerHTML=j.options[j.selectedIndex].innerHTML,$[Z].appendChild(B),(V=document.createElement("DIV")).className="select-items select-hide",D=1;D<H;D++)(F=document.createElement("DIV")).innerHTML=j.options[D].innerHTML,F.addEventListener("click",(function(e){var t,n,s,r,o,l,a;for(l=(r=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,o=this.parentNode.previousSibling,n=0;n<l;n++)if(r.options[n].innerHTML==this.innerHTML){for(r.selectedIndex=n,o.innerHTML=this.innerHTML,a=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,s=0;s<a;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}o.click()})),V.appendChild(F);$[Z].appendChild(V),B.addEventListener("click",(function(e){e.stopPropagation(),Y(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}))}function Y(e){var t,n,s,r,o,l=[];for(t=document.getElementsByClassName("select-items"),n=document.getElementsByClassName("select-selected"),r=t.length,o=n.length,s=0;s<o;s++)e==n[s]?l.push(s):n[s].classList.remove("select-arrow-active");for(s=0;s<r;s++)l.indexOf(s)&&t[s].classList.add("select-hide")}function P(e){for(;e.firstChild;)e.removeChild(e.firstChild)}if(document.addEventListener("click",(e=>{if(Y(),!(e.target.classList.contains("testing-block__link")||e.target.classList.contains("testblock-bestresults")||e.target.classList.contains("results-list__item")||e.target.classList.contains("results-list")||e.target.classList.contains("testblock-bestresults__title")||e.target.classList.contains("item-points")||e.target.classList.contains("item-points__img"))){let e=document.querySelector(".testblock-bestresults");e&&e.classList.remove("opened")}})),"index.html"===r()||"registered.html"===r()){const _e=document.querySelector(".select-selected"),Ne=document.querySelector(".select-items"),Ie=document.querySelectorAll(".filters-input"),Oe=document.querySelectorAll("#search-input"),Je=document.querySelector(".filters-button"),Te=document.querySelectorAll("datalist"),ze=document.querySelector(".search-block__search-bar"),Ue=document.querySelector(".cards-items"),$e=document.querySelector("#dict"),Ze=document.querySelector("#random-link");function De(e,t){Number(e.value)>t&&(e.value=t),Number(e.value)<1&&(e.value="")}function Me(e,t){for(let n=0;n<t.length;n++){const s=document.createElement("option");s.value=t[n][0],e.append(s)}}function He(e){let t=e.length;if(t>0)if("registered.html"===r()){if(t>=200)for(let t=1;t<201;t++)ne(!0,e[t][0],e[t][1]);else for(let n=1;n<t+1;n++)ne(!0,e[n-1][0],e[n-1][1]);if(t>200){const n=function(){te(!0,e,t)};Ue.onscroll=n}}else{if(t>=200)for(let t=1;t<201;t++)ne(!1,e[t][0],e[t][1]);else for(let n=1;n<t+1;n++)ne(!1,e[n-1][0],e[n-1][1]);if(t>200){const n=function(){te(!1,e,t)};Ue.onscroll=n}}else{const e=document.createElement("p");e.className="empty-warning",e.textContent="По выбранным фильтрам совпадений не найдено",Ue.append(e)}}function je(e){e.preventDefault(),Ue.onscroll=null,Ue.scrollTop=0,"words1"===e.target.getAttribute("list")?(P(Te[0]),document.querySelector(".header").classList.contains("reduced")?(document.querySelector(".header").classList.toggle("default"),document.querySelector(".header").classList.toggle("reduced"),setTimeout((()=>{Ve(e)}),600)):Ve(e)):Ve(e)}function Be(){_e.textContent="Выбрать";for(let e=0;e<Ne.children.length;e++)Ne.children[e].hasAttribute("class")&&Ne.children[e].removeAttribute("class");Ie[0].value="",Ie[1].value="",Oe[0].value="",Oe[1].value=""}function Ve(e){se("../dist/files/dictionary_compact.json").then((t=>{P(Ue);const n=Object.entries(t),s=n.length;let o=n,l=_e.textContent.trim().toLowerCase();if(!("выбрать"!==l||Ie[0].value||Ie[1].value||Oe[0].value||Oe[1].value)){if(P(Ue),"registered.html"===r()){for(let e=1;e<201;e++)ne(!0,n[e][0],n[e][1]);const e=function(){te(!0,n,s)};return Ue.onscroll=e,void Be()}{for(let e=1;e<201;e++)ne(!1,n[e][0],n[e][1]);const e=function(){te(!1,n,s)};return Ue.onscroll=e,void Be()}}"words1"===e.target.getAttribute("list")&&I($e,15),"выбрать"!==l&&(o=o.filter((e=>e[0][0]===l)));let a,c=Ie[0].value,i=Ie[1].value;if((c||i)&&(!c&&i&&(o=o.filter((e=>e[0].length<=+i))),c&&!i&&(o=o.filter((e=>e[0].length>=+c))),c&&i&&(o=+c==+i?o.filter((e=>e[0].length===+c)):o.filter((e=>e[0].length>=+c&&e[0].length<=+i)))),Oe[0].value&&(a=Oe[0].value),Oe[1].value&&(a=Oe[1].value),a){o=[];for(let e=n.length-1;e>=0;e--)(n[e][0]===a||n[e][0].includes(a))&&o.push(n[e])}He(o),Be()}))}function Fe(e){13===e.which&&je(e)}ze.addEventListener("click",(function(e){(e.target.classList.contains("search-block__search-bar")||e.target.classList.contains("search-block__search-input")||e.target.classList.contains("search-keyhint"))&&(document.querySelector(".header").classList.contains("default")&&document.querySelector(".header").classList.toggle("default"),document.querySelector(".header").classList.contains("reduced")||(document.querySelector(".header").classList.toggle("reduced"),setTimeout((()=>{Oe[0].focus()}),600)))})),Oe[0].addEventListener("blur",(()=>{document.querySelector(".header").classList.contains("reduced")&&(document.querySelector(".header").classList.toggle("default"),document.querySelector(".header").classList.toggle("reduced"))})),Oe[1].addEventListener("blur",(()=>{P(Te[1])})),document.body.addEventListener("scroll",(function(){let e=document.querySelectorAll("input[list]");for(let t=0;t<e.length;t++)e[t].blur()})),Ie.forEach((e=>{e.addEventListener("input",(()=>{De(e,+Ie[1].placeholder.slice(-2))}))})),se("../dist/files/dictionary_compact.json").then((e=>{const t=Object.entries(e);Oe.forEach((e=>{e.addEventListener("input",(n=>{let s=e===Oe[0]?Te[0]:Te[1],r=n.target.value;if(P(s),/^[^a-z]/.test(r)&&(r=r.substr(0,r.length-1)),/[^a-z-\s]/.test(r)&&(r=r.substr(0,r.length-1)),/\s\s/.test(r)&&(r=r.substr(0,r.length-1)),n.target.value=r,1===r.length){let e=[];for(let n=t.length-1;n>=0;n--)t[n][0].slice(0,1)===r&&t[n][0]!==r&&e.push(t[n]);Me(s,e)}if(2===r.length){let e=[];for(let n=t.length-1;n>=0;n--)t[n][0].slice(0,2)===r&&t[n][0]!==r&&e.push(t[n]);Me(s,e)}if(r.length>2){let e=[];for(let n=t.length-1;n>=0;n--)t[n][0].includes(r)&&t[n][0]!==r&&e.push(t[n]);Me(s,e)}}))})),Ze.addEventListener("click",(e=>{e.preventDefault();let n=(s=1,r=t.length,s=Math.ceil(s),r=Math.floor(r),Math.floor(Math.random()*(r-s+1))+s);var s,r;Oe[0].value=t[n][0],Oe[0].focus()}))})),Oe[0].onkeydown=Oe[0].onkeypress=Fe,Je.addEventListener("click",je)}const R="http://www.w3.org/2000/svg",W=document.querySelector(".cards-items"),G=document.querySelectorAll(".filters-input")[1];let K=201,Q=K+200+1;const X=function(){const e=document.createElementNS(R,"svg");e.setAttribute("class","card-item__save-icon"),e.setAttributeNS(null,"width","33"),e.setAttributeNS(null,"height","39"),e.setAttributeNS(null,"viewBox","0 0 33 39"),e.setAttributeNS(null,"fill","none");const t=document.createElementNS(R,"path");return t.setAttributeNS(null,"d","M32 6V4C32 2.34315 30.6569 1 29 1V1M29 1C28.3201 1 26.6305 1 26 1L21 1C15.7814 1 9.99672 1 5.99671 1C3.23528 1 1 3.23858 1 6V36.9733C1 37.8022 1.95059 38.2712 2.60843 37.7669L12.3916 30.2665C12.7505 29.9913 13.2495 29.9913 13.6084 30.2665L23.4202 37.7888C24.0728 38.2891 25.0165 37.8417 25.0282 37.0195C25.1184 30.6753 25.3937 11.1724 25.3937 9.5C25.3937 7.5 25 3.5 29 1Z"),t.setAttributeNS(null,"stroke","#4E3636"),e.append(t),e}(),ee=function(){const e=document.createElement("button");e.className="card-item__button",e.classList.add("button"),e.setAttribute("id","more-button");const t=document.createElement("span");t.className="button-span",t.textContent="Показать больше";const n=document.createElementNS(R,"svg");n.setAttribute("class","button-icon"),n.setAttributeNS(null,"fill","none");const s=document.createElementNS(R,"path");return s.setAttributeNS(null,"d","M1.87272 5.93481L5.65489 2.05828L9.4312 5.92971L10.4346 4.90114L5.65489 0.000121117L0.86935 4.90624L1.87272 5.93481Z"),s.setAttributeNS(null,"fill","#4E3636"),n.append(s),e.append(t),e.append(n),e}();function te(e,t,n){if(W.offsetHeight+W.scrollTop>=W.scrollHeight){if(e)for(let e=K;e<Q;e++)ne(!0,t[e][0],t[e][1]);else for(let e=K;e<Q;e++)ne(!1,t[e][0],t[e][1]);Q===n&&(W.onscroll=null),K=Q,Q=Q+200+1>n?n:Q+200+1}}function ne(e,t,n){let s=document.createElement("div");s.className="cards-items__card-item",s.classList.add("card-item");let r=JSON.parse(localStorage.getItem("currentUser")).favorite;if(e&&r){s.classList.add("reged");let e=X.cloneNode(!0);s.append(e)}let o=document.createElement("h3");if(o.className="card-item__title",o.textContent=`${t}`,o.setAttribute("title",`${t}`),r)for(let e=0;e<r.length;e++)r[e][0]===o.textContent&&s.children[0].classList.add("active");let l=document.createElement("img");l.className="card-item__separator",l.setAttribute("src","img/Rectangle31.svg"),l.setAttribute("alt","Separator");let a=document.createElement("p");a.className="card-item__definition",a.textContent=`${n}`,s.append(o),s.append(l),s.append(a),W.append(s);let c=W.lastChild,i=c.children;if(i[i.length-1].textContent.length>299){let e=ee.cloneNode(!0);c.append(e),c.lastChild.addEventListener("click",(()=>{c.classList.toggle("deployed"),c.lastChild.children[0].textContent=c.classList.contains("deployed")?"Свернуть":"Показать больше"}))}}async function se(e){const t=await fetch(e);return await t.json()}if("index.html"!==r()&&"registered.html"!==r()||window.addEventListener("DOMContentLoaded",(()=>{se("../dist/files/dictionary_compact.json").then((e=>{const t=Object.entries(e),n=t.length;let s=t[0][0].length;if(t.forEach((e=>{e[0].length>s&&(s=e[0].length)})),G.placeholder=`до ${s}`,P(W),"registered.html"===r()){for(let e=1;e<201;e++)ne(!0,t[e][0],t[e][1]);const e=function(){te(!0,t,n)};W.onscroll=e}else{for(let e=1;e<201;e++)ne(!1,t[e][0],t[e][1]);const e=function(){te(!1,t,n)};W.onscroll=e}}))})),"registered.html"===r()){const Ye=document.querySelector("#continue-testing"),Pe=document.querySelector("#skip-task"),Re=document.querySelector(".special-word"),We=document.querySelector(".answers-block"),Ge=document.querySelector(".testblock-banner"),Ke=document.querySelector(".testing-block__task-title"),Qe=document.querySelector("#best-results"),Xe=document.querySelector(".testblock-bestresults"),et=document.querySelector(".results-list");Ge.classList.toggle("_hidden");const tt=[{testType:"radio",word:"Catamaran",answer:"Any vessel with twin hulls, whether propelled by sails or by steam; esp., one of a class of double-hulled pleasure boats remarkable for speed.",incorrectAnswers:["The caravel of the 16th century was a small vessel with broad bows, high, narrow poop, four masts, and lateen sails.","A war vessel, ranking next below a frigate, and having usually only one tier of guns; -- called in the United States navy a sloop of war.","A light and elegantly furnished vessel, used either for private parties of pleasure, or as a vessel of state to convey distinguished persons from one place to another; a seagoing vessel used only for pleasure trips, racing, etc."]},{testType:"radio",word:"Acceptance",answer:'The act of accepting; a receiving what is offered, with approbation, satisfaction, or acquiescence; esp., favorable reception; approval; as, the acceptance of a gift, office, doctrine, etc. They shall come up with acceptance on mine altar. Isa. lx. 7. 2. State of being accepted; acceptableness. "Makes it assured of acceptance." Shak.',incorrectAnswers:["An act or instance of working or acting together for a common purpose or benefit; joint action.","The identification of something as having been previously seen, heard, known, etc.","The act of allowing to enter; entrance granted by permission, by provision or existence of pecuniary means, or by the removal of obstacles."]},{testType:"checkbox",word:"Elegant",answer:["Very choice, and hence, pleasing to good taste; characterized by grace, propriety, and refinement, and the absence of every thing offensive; exciting admiration and approbation by symmetry, completeness, freedom from blemish, and the like; graceful; tasteful and highly attractive.","Exercising a nice choice; discriminating beauty or sensitive to beauty."],incorrectAnswers:["Having an attractive, well-proportioned, and imposing appearance suggestive of health and strength.","Characterized by elegance or beauty of form, manner, movement, or speech."]}];let nt;function st(e,t){let n,s;Ke.textContent=`Задание №${t+1}`,Re.textContent=e[t].word,P(We),"radio"===e[t].testType?(n="radio",s=[{num:1,body:e[t].answer},{num:2,body:e[t].incorrectAnswers[0]},{num:3,body:e[t].incorrectAnswers[1]},{num:4,body:e[t].incorrectAnswers[2]}]):(n="checkbox",s=[{num:1,body:e[t].answer[0]},{num:2,body:e[t].answer[1]},{num:3,body:e[t].incorrectAnswers[0]},{num:4,body:e[t].incorrectAnswers[1]}],nt=[]);for(let e=0;e<4;e++){const t=document.createElement("input");t.setAttribute("id",`${e+1}`),"radio"===n?(t.setAttribute("type","radio"),t.setAttribute("name","radio-answer"),t.classList.add("answers-block__answer-radio")):(t.setAttribute("type","checkbox"),t.classList.add("answers-block__answer-checkbox"));const r=document.createElement("label");r.setAttribute("for",`${e+1}`),r.classList.add("answers-block__answer-label");const o=document.createElement("span");let l=s.length*Math.random()|0;"radio"===n&&1===s[l].num?nt=e+1:("checkbox"===n&&1===s[l].num||"checkbox"===n&&2===s[l].num)&&nt.push(e+1),o.textContent=s[l].body,s.splice(l,1),We.append(t),We.append(r),r.append(o)}}function rt(e,t){Pe.disabled=!1,Ye.disabled=!0,st(e,t)}localStorage.getItem("tests")||localStorage.setItem("tests",JSON.stringify(tt));const ot=JSON.parse(localStorage.getItem("tests")),lt=ot.length;let at=0;function ct(){if(at++,at===lt){const e=document.querySelector(".tests");P(e),Ke.textContent="Задание №0";const t=document.createElement("h3");return t.className="warning-block__title",t.textContent="Вы завершили прохождение всех тестовых заданий",void e.append(t)}return rt(ot,at),at}function it(){let e=document.querySelectorAll(".incorrect"),t=JSON.parse(localStorage.getItem("accounts")),n=JSON.parse(localStorage.getItem("currentUser")),s=+Ke.textContent.slice(-1);0===e.length&&(n.points.completedTests.includes(s)||(n.points.completedTests.push(s),n.points.pointsCount++)),localStorage.setItem("currentUser",JSON.stringify(n));for(let e=0;e<t.length;e++)t[e].email===n.email&&(t[e]=n);localStorage.setItem("accounts",JSON.stringify(t))}function dt(){const e=JSON.parse(localStorage.getItem("accounts"));let t=[];e.forEach((e=>{t.push({name:e.name,surname:e.surname,points:e.points.pointsCount})})),t=t.sort(((e,t)=>t.points-e.points)),P(et);for(let e=0;e<t.length;e++){if(e>9)return;const n=document.createElement("li");n.className="results-list__item",n.textContent=`${t[e].surname} ${t[e].name}`;const s=document.createElement("span");s.className="results-list__item-points",s.classList.add("item-points");const r=document.createElement("img");r.className="item-points__img",r.setAttribute("alt","#"),r.src="img/star.svg",s.textContent=t[e].points,s.append(r),n.append(s),et.append(n)}}st(ot,at),We.addEventListener("click",(e=>{let t=e.target;t.classList.contains("answers-block__answer-radio")?(+t.getAttribute("id")===nt?t.classList.add("correct"):t.classList.add("incorrect"),document.querySelectorAll(".answers-block__answer-radio").forEach((e=>{e.classList.contains("correct")||(e.disabled=!0),+e.getAttribute("id")!==nt||e.classList.contains("correct")||e.classList.add("discorrect")})),Pe.disabled||(Pe.disabled=!0),Ye.disabled&&(Ye.disabled=!1),"null"!==Ye.onclick&&(Ye.onclick=null,Ye.onclick=()=>{it(),ct()})):(Pe.disabled||(Pe.disabled=!0),Ye.disabled&&(Ye.disabled=!1),document.querySelectorAll(".answers-block__answer-checkbox:checked").length||(Pe.disabled=!1,Ye.disabled=!0),"null"!==Ye.onclick&&(Ye.onclick=()=>{document.querySelectorAll(".answers-block__answer-checkbox").forEach((e=>{e.checked&&(+e.getAttribute("id")===nt[0]||+e.getAttribute("id")===nt[1]?e.classList.add("correct"):e.classList.add("incorrect")),(+e.getAttribute("id")===nt[0]&&!e.classList.contains("correct")||+e.getAttribute("id")===nt[1]&&!e.classList.contains("correct"))&&e.classList.add("discorrect"),e.disabled=!0})),it(),setTimeout(ct,2500),Ye.blur()}))})),Pe.addEventListener("click",ct),Qe.addEventListener("click",(e=>{e.preventDefault(),Xe.classList.toggle("opened"),dt()}))}const re=document.querySelector(".cards-items");if("registered.html"===r()||"persAccount.html"===r()){function ut(e){let t=e.children,n=JSON.parse(localStorage.getItem("currentUser")),s=n.favorite;if(t[0].classList.contains("active"))for(let e=0;e<s.length;e++)s[e][0]===t[1].textContent&&s.splice(e,1);else t.length>4?s.push([t[1].textContent,t[t.length-2].textContent]):s.push([t[1].textContent,t[t.length-1].textContent]);let r=JSON.parse(localStorage.getItem("accounts"));for(let e=0;e<r.length;e++)r[e].email===n.email&&(r[e]=n);localStorage.setItem("accounts",JSON.stringify(r)),localStorage.setItem("currentUser",JSON.stringify(n)),t[0].classList.toggle("active")}re.addEventListener("click",(e=>{let t=e.target;t.parentElement.classList.contains("card-item__save-icon")&&ut(t.parentElement.parentElement),t.classList.contains("card-item__save-icon")&&ut(t.parentElement)}))}if("persAccount.html"===r()){const mt=JSON.parse(localStorage.getItem("currentUser")).favorite;P(re);for(let pt=0;pt<mt.length;pt++)ne(!0,mt[pt][0],mt[pt][1])}!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()})();